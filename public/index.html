<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <meta name="theme-color" content="#6366f1" />
  <title>DukanBook – Smart Shop Ledger</title>
  <meta name="description" content="DukanBook: manage customer credit (udhar), shop borrowing, sales, and payment reminders — all in one place." />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="/css/style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body>

  <!-- ════════════════════════════════════════
       AUTH OVERLAY
  ════════════════════════════════════════ -->
  <div id="authOverlay" class="auth-overlay">
    <div class="auth-card">
      <div class="auth-logo">
        <span class="logo-icon"><i class="fas fa-book-open"></i></span>
        <h1>DukanBook</h1>
        <p>Smart Shop Ledger</p>
      </div>

      <div class="auth-tabs">
        <button class="auth-tab active" id="loginTabBtn" onclick="switchAuthTab('login')"><i class="fas fa-key"></i> Login</button>
        <button class="auth-tab" id="registerTabBtn" onclick="switchAuthTab('register')"><i class="fas fa-user-plus"></i> Register</button>
      </div>

      <!-- Login Form -->
      <form id="loginForm" class="auth-form" onsubmit="handleLogin(event)">
        <div class="form-group">
          <label>Email Address</label>
          <input type="email" id="loginEmail" placeholder="you@example.com" required autocomplete="email" />
        </div>
        <div class="form-group">
          <label>Password</label>
          <input type="password" id="loginPassword" placeholder="Enter password" required autocomplete="current-password" />
        </div>
        <button type="submit" class="btn btn-primary btn-full" id="loginBtn" style="margin-top:8px;">
          Login to Dashboard →
        </button>
      </form>

      <!-- Register Form -->
      <form id="registerForm" class="auth-form hidden" onsubmit="handleRegister(event)">
        <div class="form-row">
          <div class="form-group">
            <label>Your Name</label>
            <input type="text" id="regName" placeholder="Muhammad Ali" required autocomplete="name" />
          </div>
          <div class="form-group">
            <label>Shop Name</label>
            <input type="text" id="regShopName" placeholder="Ali General Store" required />
          </div>
        </div>
        <div class="form-group">
          <label>Email</label>
          <input type="email" id="regEmail" placeholder="ali@shop.com" required autocomplete="email" />
        </div>
        <div class="form-group">
          <label>Phone</label>
          <input type="tel" id="regPhone" placeholder="03001234567" autocomplete="tel" />
        </div>
        <div class="form-group">
          <label>Password</label>
          <input type="password" id="regPassword" placeholder="Min 6 characters" required minlength="6" autocomplete="new-password" />
        </div>
        <button type="submit" class="btn btn-primary btn-full" id="registerBtn" style="margin-top:8px;">
          Create Account →
        </button>
      </form>
    </div>
  </div>

  <!-- ════════════════════════════════════════
       MAIN APP SHELL
  ════════════════════════════════════════ -->
  <div id="appShell" class="app-shell hidden">

    <!-- Sidebar Backdrop (mobile tap-to-close) -->
    <div class="sidebar-backdrop" id="sidebarBackdrop" onclick="closeSidebar()"></div>

    <!-- SIDEBAR -->
    <aside class="sidebar" id="sidebar">
      <div class="sidebar-header">
        <div class="sidebar-logo-wrap"><i class="fas fa-book-open"></i></div>
        <div class="sidebar-title">
          <span class="shop-name" id="sidebarShopName">My Shop</span>
          <small>DukanBook</small>
        </div>
        <button class="sidebar-close-btn" id="sidebarCloseBtn" onclick="closeSidebar()"><i class="fas fa-xmark"></i></button>
      </div>

      <nav class="sidebar-nav">
        <div class="nav-section-label">Main Menu</div>
        <a href="#dashboard" class="nav-item active" data-page="dashboard">
          <span class="nav-icon"><i class="fas fa-chart-pie"></i></span>
          <span class="nav-label">Dashboard</span>
        </a>
        <a href="#customers" class="nav-item" data-page="customers">
          <span class="nav-icon"><i class="fas fa-users"></i></span>
          <span class="nav-label">Customers</span>
        </a>

        <div class="nav-section-label" style="margin-top:8px;">Records</div>
        <a href="#customer-udhar" class="nav-item" data-page="customer-udhar">
          <span class="nav-icon"><i class="fas fa-credit-card"></i></span>
          <span class="nav-label">Customer Udhar</span>
        </a>
        <a href="#shop-borrow" class="nav-item" data-page="shop-borrow">
          <span class="nav-icon"><i class="fas fa-box"></i></span>
          <span class="nav-label">Shop Borrow</span>
        </a>
        <a href="#sales" class="nav-item" data-page="sales">
          <span class="nav-icon"><i class="fas fa-receipt"></i></span>
          <span class="nav-label">Sales & Receipts</span>
        </a>

        <div class="sidebar-divider"></div>
        <a href="#notifications" class="nav-item" data-page="notifications">
          <span class="nav-icon"><i class="fas fa-bell"></i></span>
          <span class="nav-label">Notifications</span>
          <span class="badge" id="notifBadge" style="display:none">0</span>
        </a>
        <a href="#profile" class="nav-item" data-page="profile">
          <span class="nav-icon"><i class="fas fa-user"></i></span>
          <span class="nav-label">My Profile</span>
        </a>
      </nav>

      <div class="sidebar-footer">
        <!-- User info card -->
        <div class="sidebar-user-card">
          <div class="sidebar-user-avatar" id="sidebarUserAvatar">S</div>
          <div class="sidebar-user-info">
            <span class="sidebar-user-name" id="sidebarUserName">Shopkeeper</span>
            <span class="sidebar-user-role">Owner</span>
          </div>
        </div>
        <button class="btn-theme-toggle" id="themeToggleBtn" onclick="toggleTheme()">
          <span id="themeIcon"><i class="fas fa-moon"></i></span> Dark Mode
        </button>
        <button class="btn-logout" onclick="handleLogout()">
          <i class="fas fa-right-from-bracket"></i> Logout
        </button>
      </div>
    </aside>

    <!-- MAIN CONTENT -->
    <main class="main-content">
      <!-- Top Header -->
      <header class="top-header">
        <button class="hamburger" onclick="openSidebar()" id="hamburgerBtn" aria-label="Open menu">
          <i class="fas fa-bars"></i>
        </button>
        <div class="header-info">
          <h2 id="pageTitle">Dashboard</h2>
        </div>
        <div class="header-right">
          <span class="user-greeting" id="userGreeting">Welcome!</span>
          <div class="user-avatar" id="headerUserAvatar">S</div>
        </div>
      </header>

      <!-- Toast Notifications -->
      <div id="toastContainer" class="toast-container"></div>

      <!-- Page Content -->
      <div id="pageContent" class="page-content">
        <div class="loading-spinner">
          <div class="spinner"></div>
          <p>Loading...</p>
        </div>
      </div>
    </main>
  </div>

  <!-- MODAL -->
  <div id="modalOverlay" class="modal-overlay hidden" onclick="closeModal(event)">
    <div class="modal-box" id="modalBox">
      <div class="modal-header">
        <h3 id="modalTitle">Modal</h3>
        <button class="modal-close" onclick="closeModal()"><i class="fas fa-xmark"></i></button>
      </div>
      <div id="modalBody"></div>
    </div>
  </div>

  <!-- SCRIPTS -->
  <script src="/js/app.js"></script>
  <script src="/js/auth.js"></script>
  <script src="/js/dashboard.js"></script>
  <script src="/js/customers.js"></script>
  <script src="/js/customerUdhar.js"></script>
  <script src="/js/shopBorrow.js"></script>
  <script src="/js/sales.js"></script>
  <script src="/js/notifications.js"></script>
  <script src="/js/profile.js"></script>
</body>
</html>
